<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="css/sample.css">
<title>GoogleBook検索</title>
</head>
<body>

  <header id=header class="header">
    <h1>  </h1>
    <img class="logo" src="https://www.google.com/intl/en_ALL/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="GoogleBooks検索">
    <div class="search_container">
      <input  size="25" type="text" id="keyword" placeholder="本を検索">
      <button type="submit" id="readbook">Search</button>
    </div>

  <p>書籍の全文が登録された世界最大級の包括的なインデックスを検索できます。</p>
  <a href="https://www.keishicho.metro.tokyo.lg.jp/saiyo/2021/"><h5>マイライブラリ</h5></a>

</header>

<div class="result" id="result">
    <a href="index.html"><img class="logo2" src="https://www.google.com/intl/en_ALL/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="GoogleBooks検索"></a>
    <input  class="input2" size="50" type="text" id="keyword" placeholder="本を検索">
    <button type="submit" id="readbook"><img class="icon" src="./image/icon.png" alt=""></button>
</div>

<div class="bardiv" id="bar">
<img class="bar" src="./image/resultbar.png" alt="検索結果">
</div>

  <main>
    <div>
    <p  id="bookimage"></p>
  </div>
  <div>
    <p  id="content"></p>
  </div>
  </main>


<script src="js/jquery-3.5.1.min.js"></script>
<script>


// クリックイベント
$('button').click(function() {
        console.log('クリックされました！');
        const bookname = $("#keyword").val()
        console.log(bookname);
        $("#header").hide();
        $("#result").show();
        $("#bar").show();


//入力値取得

const url = "https://www.googleapis.com/books/v1/volumes?q=" + bookname;


// $.get() を使う[開始]

$.get(url, function(data){
  console.log(data);
  const items =data.items
  let view = "";
  for (let i =0; i < items.length; i++){
    const item=items[i]
    console.log(item.volumeInfo.title);
    console.log(item.volumeInfo.authors);
    console.log(item.volumeInfo.description);
   
    const title = item.volumeInfo.title;
    const author =item.volumeInfo.authors;
    const desc =item.volumeInfo.description;


    view += '<div style="height:250px; width:600px; vertical-align: top;"><h2>google.co.jp›books</h2><li>'+title+"</li><h3>"+author+"</h3><h4 style='width:600px; white-space:nowrap; overflow: hidden; text-overflow:ellipsis;'>"+desc+"</h4></div>";
  }
  $("#content").html(view)
})

$.get(url, function(data2){
  console.log(data2);
  const items =data2.items
  let bookimage = "";
  for (let i =0; i < items.length; i++){
    const item=items[i]
    const link =item.volumeInfo.imageLinks.smallThumbnail;
    
    bookimage += '<div style="height:250px; width:200px;"><img style="height:200px;" src="'+link+'"></div>';
  }
  $("#bookimage").html(bookimage)
})


});
// $.get() を使う[終了]

</script>
</body>
</html>
